{% extends "application/layout.html" %}

{% block body %}
    <div class="main-input col-6 offset-3 mt-4">
        <h3 class="history-title text-center">View Past Journal Entries</h3>

        <!-- Category Selection Form -->
        <form class="form-input" action="{% url 'history_render_category' %}" method="post">
            {% csrf_token %}
            <p class="create-subtitle">Select a Category:</p>

            <div class="card-layout">
                {% for category in categories %}
                <label class="category-card">
                    <input class="form-check-input" type="radio" name="category" value="{{ category.id }}" required>
                    <div class="category-content">
                        <h4 class="category-title">{{ category.category_name }}</h4>
                        <p class="category-description">{{ category.category_description }}</p>
                        <img class="category-icon" src="{{ category.icon_url }}" alt="{{ category.category_name }} icon">
                    </div>
                </label>
                {% endfor %}
            </div>

            <div class="text-center mt-3">
                <input class="btn btn-purple view-entry-btn" type="submit" value="View Entries">
            </div>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cards = document.querySelectorAll(".category-card input[type='radio']");
            cards.forEach(radio => {
                radio.addEventListener("change", function () {
                    document.querySelectorAll(".category-card").forEach(card => {
                        card.classList.remove("active");
                    });
                    this.closest(".category-card").classList.add("active");
                });
            });
        });
    </script>

{% endblock %}
